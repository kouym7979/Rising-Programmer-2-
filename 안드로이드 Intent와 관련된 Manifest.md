## 안드로이드 Intent와 관련된 Manifest

##### android:launchMode

액티비티를 시작하는 방법에 대한 지침입니다. 인텐트를 처리하기 위해 액티비티를 호출할 때 발생하는 것을 결정하기 위해 Intent 객체에서 액티비티 플래그(FLAG_ACTIVITY_* 상수)와 함께 작동하는 4개의 모드가 있습니다.

-  standard
-  singleTop
-  singleTask
-  singleInstance

기본 모드는 "standard"입니다.

##### standard:

시스템은 활동이 시작된 작업에 활동의 새 인스턴스를 생성하고 인텐트를 인스턴스로 라우팅합니다. 활동은 여러 번 인스턴스화될 수 있고 각 인스턴스는 서로 다른 작업에 속할 수 있으며 한 작업에는 여러 인스턴스가 있을 수 있습니다.

##### singleTop

활동의 인스턴스가 이미 현재 작업의 맨 위에 있으면 시스템은 활동의 새 인스턴스를 생성하지 않고 onNewIntent() 메서드를 호출하여 인텐트를 기존 인스턴스로 라우팅합니다. 활동은 여러 번 인스턴스화될 수 있고 각 인스턴스는 서로 다른 작업에 속할 수 있으며 한 작업에는 여러 인스턴스가 있을 수 있습니다(단, 백 스택의 맨 위에 있는 활동이 활동의 기존 인스턴스가 아닐 때에만)



standard와 singleTop 시작모드를 포함한 액티비티는 여러 번 인스턴스화 할 수 있습니다. 

인스턴스는 아무 작업에 속할 수 있으며 액티비티 스택의 아무 장소에 위치할 수 있습니다. 일반적으로 인스턴스는 startActivity()를 호출한 작업에서 시작됩니다. (이는 인텐트 객체가 FLAG_ACTIVITY_NEWTASK 지침을 포함하지 않는 경우에 해당하며, 이때 여러 작업을 선택합니다)

standard 모드와 singleTop 모드의 차이점은 한가지 있는데 "standard" 액티비티에 대한 새 인텐트가 있을 때마다 해당 인텐트에 응답하도록 새 클래스 인스턴스가 생성됩니다.  마찬가지로, "singleTop" 액티비티의 새 인스턴스도 새 인텐트를 처리하도록 생성됩니다. 다만 대상 작업의 스택 상단에 이미 해당 액티비티의 기존 인스턴스가 있는 경우, 해당 인스턴스가 새 인텐트를 수신하게 되며 새 인스턴스가 생성되지 않습니다.

___

##### singleTask

시스템이 새 작업을 생성하고 루트에 있는 활동을 인스턴스화합니다. 그러나 활동의 인스턴스가 이미 별도의 작업에 있다면 시스템은 새 인스턴스를 생성하지 않고 onNewIntent() 메서드를 호출하여 인텐트를 기존 인스턴스로 라우팅합니다. 활동의 인스턴스가 한 번에 하나만 존재할 수 있습니다.

##### singleInstance

"singleTask"와 동일하지만 시스템이 인스턴스를 보유한 작업으로는 어떤 다른 활동도 실행하지않는다는 점이 다릅니다. 활동은 항상 자체 작업의 단 하나의 유일한 멤버입니다. 이 활동으로 시작된 모든 활동은 별도의 작업으로 열립니다.



singleTask모드와 singleInstance 모드도 다음과 같은 차이점이 있습니다.

singleTask 액티비티는 다른 액티비티가 작업의 일부가 되도록 허용합니다. 이는 항상 작업의 루트에 있지만 다른 액티비티(반드시 "standard" 및 "singleTop" 액티비티)를 해당 작업에서 시작할 수 있습니다. 반면에 "SingleInstance" 액티비티는 다른 액티비티가 작업의 일부가 되도록 허용하지 않습니다. 이것이 해당 작업 내의 유일한 액티비티입니다. 다른 액티비티를 시작하는 경우 해당 액티비티는 FLAG_ACTIVITY_NEW_TASK가 인텐트에 있는 것처럼 다른 작업에 할당됩니다. 

____

##### 인텐트 플래그 사용

활동을 시작할 때 startActivity()에 전달하는 인텐트에 플래그를 포함함으로써 활동과 작업의 기본 연결을 수정할 수 있습니다. 기본 동작을 수정하는 데 사용할 수 있는 플래그는 다음과 같습니다.

- FLAG_ACTIVITY_NEW_TASK

  - 활동을 새 작업에서 시작합니다. 지금 시작하고 있는 활동에 대해 이미 실행 중인 작업이 있으면 그 작업이 마지막 상태가 복원되어 포그라운드로 이동하고 활동은 onNewIntent()의 새 인텐트를 수신합니다.

  이 플래그를 사용하면 "singleTask"값과 동일한 동작이 발생합니다.

- FLAG_ACTIVITY_SINGLE_TOP

  - 시작 중인 활동이 현재 활동(백 스택의 맨 위에 있는)이면 활동의 새 인스턴스가 생성되는 대신 기존 인스턴스가 onNewIntent()호출을 수신합니다.
  - 이 플래그를 사용하면 "singleTop"값과 동일한 동작이 발생합니다.

- FLAG_ACTIVITY_CLEAR_TOP

  - 시작 중인 활동이 현재 작업에서 이미 실행 중이면 활동의 새 인스턴스가 실행되는 대신 작업의 맨 위에 있는 다른 모든 활동이 제거되고 이 인텐트가 onNewIntent()를 통해 활동(이제 맨 위에 있음)의 다시 시작된 인스턴스로 전달됩니다.
  - FLAG_ACTIVITY_CLEAR_TOP은 FLAG_ACTIVITY_NEW_TASK와 함께 가장 자주 사용됩니다.이러한 플래그를 함께 사용하면 또 다른 작업에 있는 기존 활동을 찾아 인텐트에 응답할 수 있는 위치에 활동을 넣을 수 있습니다.

##### 